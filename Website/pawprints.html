
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel='stylesheet' href='style.css'>
  <link rel='stylesheet' href='reset.css'>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>



<body>
  <div class='header'>
    <a href='pawprints.html' id='header'>Paw Prints</a>
  </div>
  <div class='pawprints-container'>
	  <nav class="bar">
	    <div>
		  <a href="pawprints.html" class="button bar-item">HOME</a>
		  <a href="pet-page.html" class="button bar-item">PETS</a>
		  <a href="contact.html" class="button bar-item">ABOUT US</a>
	    </div>
	    <input type='text' id='search' name='search' placeholder='Search'/>
	  </nav>

		<div class='recent-pet-container'>
		  <h3 class='recent-pets-header'>Most Recent Pet Profiles</h3>
		    <div class='recent-pets-page'>
		     <!-- <div class='pet-img-name-container'>
	  		    <button id='myBtn' style="text-decoration:none" target='_self'>
			      <img class='pet-img' src='dog1.jpg' alt='dog1'></img>
			      <p id='pet-name'>Oliver</p>
			    </button>
			  <div id="myModal" class="modal"> -->
				<!-- Pet Modal -->
				<!-- <div class="modal-content">
				  <span class="close">&times;</span>
				  <img class='pet-modal-img' src='dog1.jpg' alt='dog1'></img>
				  <h2 class='pet-modal-header'>Oliver</h2>
				  <div class='pet-text-container'>
				    <p class='pet-modal-text'>Age: 1 Year</p>
				    <p class='pet-modal-text'>Breed: Golden Retriever </p>
				    <p class='pet-modal-text'>Location: Baton Rouge, LA </p>
				    <p class='pet-modal-text'>Shelter: True Friends</p>
				    <p class='pet-modal-text'>Description: Oliver was found as a stray and he is a 1 year old golden retriever. He is well socialized with other dogs and loves to play. He also seeks out her foster mom for cuddles. Adoptions by appointment only. Adoption fee will cover her vet exam, spay surgery, distemper, rabies vaccine, microchip, dewormer, flea meds, free vet exam coupon and 30 days pet insurance.</p>
				  </div>
				</div>
			  </div>
			  </div>

			  <div class='pet-img-name-container'>
	  		    <a style="text-decoration:none" href='' target='_self'>
			      <img class='pet-img' src='cat1.jpg' alt='cat1'></img>
			      <p id='pet-name'>Olivia</p>
			    </a>
			  </div>
	  		  <div class='pet-img-name-container'>
	  		    <a style="text-decoration:none" href='' target='_self'>
			      <img class='pet-img' src='cat3.jpg' alt='cat3'></img>
			      <p id='pet-name'>Vivian</p>
			    </a>
			  </div>
	  		  <div class='pet-img-name-container'>
	  		    <a style="text-decoration:none" href='' target='_self'>
			      <img class='pet-img' src='dog2.jpg' alt='dog2'></img>
			      <p id='pet-name'>Bruno</p>
			    </a>
			  </div>
	  		  <div class='pet-img-name-container'>
	  		    <a style="text-decoration:none" href='' target='_self'>
			      <img class='pet-img' src='dog3.jpg' alt='dog3'></img>
			      <p id='pet-name'>Fonzie</p>
			    </a>
			  </div> -->
			  <ul id='pets'> 
			  	<div id='pets-div'/>
			  </ul>
			  <!-- <ul id='pictures'></ul> -->
			</div>
		    <a href="pet-page.html">
		      <button class="see-more-button">MORE PETS</button>
		    </a>
		</div>

		<div class="shelter-footer">
		  <h3 id='box-headers'>Partnered Shelters</h3>
			<div class='shelter-img-links'>
			  <a href='http://www.truefriendsawc.com/' target='_self'>
			    <img class='shelter-img' src='true-friends-logo.png' alt='True Friends'></img>
			  </a>
				  <a href='http://www.caaws.org/' target='_self'>
			    <img class='shelter-img' src='companion-alliance.png' alt='Companion Alliance'></img>
			  </a>
			  <a href='http://yelpbatonrouge.com/' target='_self'>
			    <img class='shelter-img' src='yelp-br.jpg' alt='Yelp! BR'></img>
			  </a>
			</div>
		</div>

		<div class='social-footer'>
		  <div class='social-pawprint-logo'>
		    <h3 id='pawprint-logo'>PawPrints</h3>
		    <p id='pawprint-mission'>Bacon ipsum dolor amet tail pork chop cow, turducken jowl chicken tongue t-bone. Landjaeger alcatra leberkas, porchetta ball tip jerky doner drumstick rump pork loin boudin andouille. Brisket meatloaf ribeye boudin.</p>
		  </div>
		  <div class='social-column'>
		    <h4 id='social-header'>Navigation</h4>
		    <div class='social-nav-column'>
			  <a href="pawprints.html" id="social-nav-text"><p id='footer-nav-link'>HOME</p></a>
			  <a href="pet-page.html" id="social-nav-text">PETS</a>
			  <a href="contact.html" id="social-nav-text">ABOUT US</a>
		    </div>
		  </div>
		  <div class='social-column'>
		  	<h4 id='social-header'>Social Media</h4>
		  	<img id='social-icon' src='facebook-icon.png' alt='facebook'></img>
		  	<img id='social-icon' src='twitter-icon.png' alt='twitter'></img>
		  </div>
		  <div class='social-column'>
		  	<h4 id='social-header'>Contact</h4>
		  	<div class='social-text-column'>
			  <p id='social-text'>support@pawprints.com</p>
			  <p id='social-text'>Baton Rouge, LA 70802</p>
			</div>
		  </div>
		</div>
		<div class='copyright-footer'>
		  <p>Â© 2017 PawPrints.</p>
		</div>
  </div>


<script> //Modal Script
	// Get the modal
	var modal = document.getElementById('myModal');

	// Get the button that opens the modal
	var btn = document.getElementById("myBtn");

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks the button, open the modal 
	btn.onclick = function() {
	    modal.style.display = "block";
	}

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
	    modal.style.display = "none";
	}

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
	    if (event.target == modal) {
	        modal.style.display = "none";
	    }
	}
</script>

<script>
function createNode(element) {
  return document.createElement(element);
}

function append(parent, el) {
return parent.appendChild(el);
}

function getPetData() {
  const ul = document.getElementById('pets');
  const url = 'http://68.11.238.103:81/get_pets.php/';
  fetch(url)
	.then((res) => res.json())
		.then(function(data) {
			console.log(data);
		    let pets = data.pets.slice(0,5);
		    return pets.map(function(pet) {
		      getPetImg(pet.id);
		      let li = createNode('li'),
		      	  span = createNode('span'),
		      	  img = createNode('img'),
		      	  div = createNode('div');
		      img.id = 'profile-pet';
		      div.id = 'recent-pet-div';
		      span.innerHTML = pet.name;
		      img.src = 'http://68.11.238.103:81/'+ pet.profile_picture;
		     
		      append(div, img);
		      append(div, span);
		      append(li, div);
		      append(ul, li);
		    })
		})
.catch(function(error) {
    console.log('error');
  })
}


function getPetImg(id) {
	const ul = document.getElementById('pictures');
	const url = 'http://68.11.238.103:81/get_picture.php?id=' + id;
	fetch(url)
	.then((res) => res.json())
		.then(function(data) {
			console.log(data);
			let pictures = data.pictures;
			return pictures.map(function(picture) {
				let img = createNode('img'),
					li = createNode('li');
				let profileImg = 'http://68.11.238.103:81/'+picture.data;
				img.src= profileImg;
				append(li, img);
				append(ul, li);
			})
		})
		.catch(function(error) {
    		console.log('picture not found');
  		})
}

getPetData();
</script>

</body>
</html>

